<html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Different probabilities · Procedural layout generation</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta property="og:title" content="Different probabilities · Procedural layout generation"/><meta property="og:type" content="website"/><meta property="og:url" content="https://ondrejnepozitek.github.io//ProceduralLevelGenerator/index.html"/><meta property="og:description" content="In this tutorial, we will describe how to control the appearence of generated layouts by setting probabilities of choosing individual room shapes."/><link rel="shortcut icon" href="/ProceduralLevelGenerator/undefined"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/ProceduralLevelGenerator/css/main.css"/></head><body class="sideNavVisible"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/ProceduralLevelGenerator/"><h2 class="headerTitle">Procedural layout generation</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li><a href="/ProceduralLevelGenerator/docs/introduction.html" target="_self">Docs</a></li><li><a href="https://github.com/OndrejNepozitek/ProceduralLevelGenerator/" target="_self">Github</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Guides</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>Introduction</h3><ul><li class="navListItem"><a class="navItem" href="/ProceduralLevelGenerator/docs/introduction.html">Introduction</a></li><li class="navListItem"><a class="navItem" href="/ProceduralLevelGenerator/docs/installation.html">Installation</a></li></ul></div><div class="navGroup navGroupActive"><h3>Guides</h3><ul><li class="navListItem"><a class="navItem" href="/ProceduralLevelGenerator/docs/guides.html">Introduction</a></li><li class="navListItem"><a class="navItem" href="/ProceduralLevelGenerator/docs/basicMapDescription.html">Basics</a></li><li class="navListItem"><a class="navItem" href="/ProceduralLevelGenerator/docs/differentShapesMapDescription.html">Different shapes</a></li><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/ProceduralLevelGenerator/docs/differentProbabilitiesMapDescription.html">Different probabilities</a></li><li class="navListItem"><a class="navItem" href="/ProceduralLevelGenerator/docs/corridorsMapDescription.html">Corridors</a></li></ul></div><div class="navGroup navGroupActive"><h3>Misc</h3><ul><li class="navListItem"><a class="navItem" href="/ProceduralLevelGenerator/docs/gui.html">GUI</a></li><li class="navListItem"><a class="navItem" href="/ProceduralLevelGenerator/docs/configFormat.html">Config format</a></li><li class="navListItem"><a class="navItem" href="/ProceduralLevelGenerator/docs/benchmarks.html">Benchmarks</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1>Different probabilities</h1></header><article><div><span><p>In this tutorial, we will describe how to control the appearence of generated layouts by setting probabilities of choosing individual room shapes.</p>
<h2><a class="anchor" aria-hidden="true" name="setup"></a><a href="#setup" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Setup</h2>
<p>In this tutorial, we will use a graph with 15 vertices codenamed <em>Example5</em>:</p>
<p><img src="/ProceduralLevelGenerator/docs/assets/graphs/example5.svg" alt="alt-text"></p>
<h2><a class="anchor" aria-hidden="true" name="room-shapes"></a><a href="#room-shapes" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Room shapes</h2>
<p>We will define 2 square and 2 rectangle room shapes for this tutorial.</p>
<p><strong>Note:</strong> We need at least 3 room shapes for this tutorial to work. This is because when we perturb the shape of a node, we must always pick a different shape.</p>
<h3><a class="anchor" aria-hidden="true" name="using-c-api"></a><a href="#using-c-api" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Using C# api</h3>
<pre><code class="hljs css csharp"><span class="hljs-keyword">var</span> doorMode = <span class="hljs-keyword">new</span> OverlapMode(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>);

<span class="hljs-keyword">var</span> squareRoomBig = <span class="hljs-keyword">new</span> RoomDescription(
  GridPolygon.GetSquare(<span class="hljs-number">8</span>),
  doorMode
);
<span class="hljs-keyword">var</span> squareRoomSmall = <span class="hljs-keyword">new</span> RoomDescription(
  GridPolygon.GetSquare(<span class="hljs-number">6</span>),
  doorMode
);
<span class="hljs-keyword">var</span> rectangleRoomBig = <span class="hljs-keyword">new</span> RoomDescription(
  GridPolygon.GetRectangle(<span class="hljs-number">8</span>, <span class="hljs-number">12</span>),
  doorMode
);
<span class="hljs-keyword">var</span> rectangleRoomSmall = <span class="hljs-keyword">new</span> RoomDescription(
  GridPolygon.GetRectangle(<span class="hljs-number">6</span>, <span class="hljs-number">10</span>),
  doorMode
);
</code></pre>
<h3><a class="anchor" aria-hidden="true" name="using-config-files"></a><a href="#using-config-files" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Using config files</h3>
<pre><code class="hljs css yaml"><span class="hljs-comment"># Resources/Rooms/tutorial_differentProbabilities.yaml</span>

<span class="hljs-attr">name:</span> <span class="hljs-string">tutorial_differentProbabilities</span>
<span class="hljs-attr">default:</span>
<span class="hljs-attr">  doorMode:</span> <span class="hljs-string">!OverlapMode</span>
<span class="hljs-attr">    doorLength:</span> <span class="hljs-number">1</span>
<span class="hljs-attr">    cornerDistance:</span> <span class="hljs-number">1</span>
<span class="hljs-attr">roomDescriptions:</span>
<span class="hljs-attr">  square-big:</span>
<span class="hljs-attr">    shape:</span> <span class="hljs-string">[[0,0],</span> <span class="hljs-string">[0,8],</span> <span class="hljs-string">[8,8],</span> <span class="hljs-string">[8,0]]</span>
<span class="hljs-attr">  square-small:</span>
<span class="hljs-attr">    shape:</span> <span class="hljs-string">[[0,0],</span> <span class="hljs-string">[0,6],</span> <span class="hljs-string">[6,6],</span> <span class="hljs-string">[6,0]]</span>
<span class="hljs-attr">  rectangle-big:</span>
<span class="hljs-attr">    shape:</span> <span class="hljs-string">[[0,0],</span> <span class="hljs-string">[0,8],</span> <span class="hljs-string">[12,8],</span> <span class="hljs-string">[12,0]]</span>
<span class="hljs-attr">  rectangle-small:</span>
<span class="hljs-attr">    shape:</span> <span class="hljs-string">[[0,0],</span> <span class="hljs-string">[0,6],</span> <span class="hljs-string">[10,6],</span> <span class="hljs-string">[10,0]]</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" name="adding-probabilities"></a><a href="#adding-probabilities" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Adding probabilities</h2>
<p>We will now make the bigger square have ten times greater probability to be picked.</p>
<p><strong>Note:</strong> It is not guaranteed that generated layouts will obey a defined probability distribution. This is because some shapes are not suitable for the input graph and simulated annealing will have problems when trying to lay them out. And that will result in mostly accepting layouts without such shapes even if we set high probabilities to them.</p>
<h3><a class="anchor" aria-hidden="true" name="using-c-api"></a><a href="#using-c-api" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Using C# api</h3>
<pre><code class="hljs css csharp"><span class="hljs-keyword">var</span> mapDescription = <span class="hljs-keyword">new</span> MapDescription&lt;<span class="hljs-keyword">int</span>&gt;();

<span class="hljs-comment">// Graph and shapes are created here.</span>

mapDescription.AddRoomShapes(squareRoomBig, probability: <span class="hljs-number">10</span>);
mapDescription.AddRoomShapes(squareRoomSmall);
mapDescription.AddRoomShapes(rectangleRoomBig);
mapDescription.AddRoomShapes(rectangleRoomSmall);
</code></pre>
<h3><a class="anchor" aria-hidden="true" name="using-config-files"></a><a href="#using-config-files" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Using config files</h3>
<p>In previous tutorials, we always utilized the fact that we had all our room shapes in one file and we could therefore simply add all of them at once. In this tutorial, however, we want to specify the probability of one of the rooms shapes. That means that we have to add room shapes one by one instead of adding them all at once.</p>
<pre><code class="hljs css yaml"><span class="hljs-comment"># Resources/Maps/tutorial_differentProbabilities.yml</span>

<span class="hljs-comment"># Rooms and passages are added here.</span>

<span class="hljs-attr">defaultRoomShapes:</span>
<span class="hljs-bullet">  -</span>
<span class="hljs-attr">    setName:</span> <span class="hljs-string">tutorial_differentProbabilities</span>
<span class="hljs-attr">    roomDescriptionName:</span> <span class="hljs-string">square-big</span>
<span class="hljs-attr">    probability:</span> <span class="hljs-number">10</span>
<span class="hljs-bullet">  -</span>
<span class="hljs-attr">    setName:</span> <span class="hljs-string">tutorial_differentProbabilities</span>
<span class="hljs-attr">    roomDescriptionName:</span> <span class="hljs-string">square-small</span>
<span class="hljs-bullet">  -</span>
<span class="hljs-attr">    setName:</span> <span class="hljs-string">tutorial_differentProbabilities</span>
<span class="hljs-attr">    roomDescriptionName:</span> <span class="hljs-string">rectangle-big</span>
<span class="hljs-bullet">  -</span>
<span class="hljs-attr">    setName:</span> <span class="hljs-string">tutorial_differentProbabilities</span>
<span class="hljs-attr">    roomDescriptionName:</span> <span class="hljs-string">rectangle-small</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" name="summary"></a><a href="#summary" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Summary</h2>
<p>The map description is now ready to be used in a layout generator. You can find the full C# source code <a href="https://github.com/OndrejNepozitek/ProceduralLevelGenerator/blob/master/Sandbox/Examples/DifferentProbabilitiesExample.cs">here</a> and the config files <a href="https://github.com/OndrejNepozitek/ProceduralLevelGenerator/tree/master/Resources">here</a>.</p>
<h2><a class="anchor" aria-hidden="true" name="results"></a><a href="#results" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Results</h2>
<div class="results">
  <a href="/ProceduralLevelGenerator/docs/assets/differentProbabilities/0.jpg" target="_blank">
    <img src="/ProceduralLevelGenerator/docs/assets/differentProbabilities/0.jpg" alt="result">
  </a>
  <a href="/ProceduralLevelGenerator/docs/assets/differentProbabilities/1.jpg" target="_blank">
    <img src="/ProceduralLevelGenerator/docs/assets/differentProbabilities/1.jpg" alt="result">
  </a>
  <a href="/ProceduralLevelGenerator/docs/assets/differentProbabilities/2.jpg" target="_blank">
    <img src="/ProceduralLevelGenerator/docs/assets/differentProbabilities/2.jpg" alt="result">
  </a>
  <a href="/ProceduralLevelGenerator/docs/assets/differentProbabilities/3.jpg" target="_blank">
    <img src="/ProceduralLevelGenerator/docs/assets/differentProbabilities/3.jpg" alt="result">
  </a>
</div>
<p><strong>Note:</strong> Click on images to see them in a full size.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="differentShapesMapDescription.html">← Different shapes</a><a class="docs-next button" href="corridorsMapDescription.html">Corridors →</a></div></div></div></div></div></body></html>