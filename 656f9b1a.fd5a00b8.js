(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{141:function(e,r,t){"use strict";t.r(r),t.d(r,"frontMatter",(function(){return c})),t.d(r,"metadata",(function(){return l})),t.d(r,"rightToc",(function(){return u})),t.d(r,"default",(function(){return p}));var n=t(1),o=t(9),a=(t(0),t(163)),i=t(164),s=t(170),c={title:"Corridors",sidebar_label:"Corridors"},l={id:"guides/corridors",title:"Corridors",description:'import useBaseUrl from "@docusaurus/useBaseUrl";\r',source:"@site/docs\\guides\\corridors.md",permalink:"/ProceduralLevelGenerator/docs/next/guides/corridors",editUrl:"https://github.com/OndrejNepozitek/ProceduralLevelGenerator/tree/docusaurus/docs/guides/corridors.md",version:"next",sidebar_label:"Corridors",sidebar:"docs",previous:{title:"Different room descriptions",permalink:"/ProceduralLevelGenerator/docs/next/guides/different-room-descriptions"},next:{title:"Exporting generated layouts",permalink:"/ProceduralLevelGenerator/docs/next/guides/export"}},u=[{value:"Setup",id:"setup",children:[]},{value:"Adding corridors",id:"adding-corridors",children:[{value:"Using C# api",id:"using-c-api",children:[]},{value:"Using config files",id:"using-config-files",children:[]}]},{value:"Summary",id:"summary",children:[]},{value:"Results",id:"results",children:[]}],d={rightToc:u};function p(e){var r=e.components,t=Object(o.a)(e,["components"]);return Object(a.b)("wrapper",Object(n.a)({},d,t,{components:r,mdxType:"MDXLayout"}),Object(a.b)("p",null,"There are currently 2 layout generators implemented. The first one generates layouts where neighbouring rooms are connected by doors. The second one, on the other hand, connects neighbouring rooms by corridors."),Object(a.b)("p",null,"In this tutorial, we will look into how to use the latter one."),Object(a.b)("h2",{id:"setup"},"Setup"),Object(a.b)("p",null,"In this tutorial, we will use a graph with 17 vertices codenamed ",Object(a.b)("em",{parentName:"p"},"Example1"),":"),Object(a.b)("img",{alt:"Graph",src:Object(i.a)("img/graphs/example1.svg")}),";",Object(a.b)("p",null,"We will use basic default shapes for rooms - a square and a rectangle - as they are not important for this tutorial."),Object(a.b)("h2",{id:"adding-corridors"},"Adding corridors"),Object(a.b)("p",null,"Corridors could be handled as normal rooms just with specific shapes. Hovewer, this approach is very slow as the total number of nodes in the graph becomes almost twice the original count (because map description needs connected graphs)."),Object(a.b)("p",null,"Instead, a completely different approach was implemented. The algoritm ignores corridor rooms and tries to get valid layouts consisting only of the ogirinal rooms without corridors. Hovewer, the algorithms does not place neighbouring rooms directly next to each other. It places such rooms in a way that they are specified number of units away from each other (this is reffered to be the ",Object(a.b)("em",{parentName:"p"},"offset of configuration spaces")," througnout this documentation). When a valid layout is found, the algorithm tries to greedily add corridor rooms."),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"Note:")," Currently, ",Object(a.b)("inlineCode",{parentName:"p"},"MapDescription")," class supports either not having corridors or adding a corridor between every pair of neighbouring rooms."),Object(a.b)("p",null,"In this tutorial, we will set the offset of non corridor neighbours to be equal to 1 and then set room shapes of corridor rooms to be 1x1 squares."),Object(a.b)("p",null,"Let's add corridors:"),Object(a.b)("h3",{id:"using-c-api"},"Using C# api"),Object(a.b)("p",null,"First we have to obtain the right instance of ",Object(a.b)("inlineCode",{parentName:"p"},"ChainBasedGenerator")," class:"),Object(a.b)("pre",null,Object(a.b)("code",Object(n.a)({parentName:"pre"},{className:"language-csharp"}),"var layoutGenerator = LayoutGeneratorFactory.GetChainBasedGeneratorWithCorridors<int>(new List<int>() { 1 });\n")),Object(a.b)("p",null,"And now we setup the map description:"),Object(a.b)("pre",null,Object(a.b)("code",Object(n.a)({parentName:"pre"},{className:"language-csharp"}),"var mapDescription = new MapDescription<int>();\n\n// Graph and default shapes are set here.\n\n// Setup corridor shapes\nvar corridorRoom = new RoomDescription(\n  GridPolygon.GetSquare(1),\n  new SpecificPositionsMode(new List<OrthogonalLine>()\n  {\n    new OrthogonalLine(new IntVector2(0, 0), new IntVector2(1, 0)),\n    new OrthogonalLine(new IntVector2(0, 1), new IntVector2(1, 1))\n  })\n);\n\nmapDescription.AddCorridorShapes(corridorRoom);\n\n// Enable corridors\nmapDescription.SetWithCorridors(true, new List<int>() { 1 });\n")),Object(a.b)("h3",{id:"using-config-files"},"Using config files"),Object(a.b)("p",null,"We first create a tutorial_corridors.yml file under the Resources/Rooms folder. Here we add room shapes for our corridors. We will create one shape - 1x1 square with doors on two opposite sides. "),Object(a.b)("pre",null,Object(a.b)("code",Object(n.a)({parentName:"pre"},{className:"language-yaml"}),"# Resources/Rooms/tutorial_corridors.yml\n\nname: tutorial_corridors\nroomDescriptions:\n  1-square:\n    shape: [[0,0], [0,1], [1,1], [1,0]]\n    doorMode: !SpecificPositionsMode\n      doorPositions: \n        - [[0,0], [1,0]]\n        - [[0,1], [1,1]]\n")),Object(a.b)("p",null,"Now we create the map description:"),Object(a.b)("pre",null,Object(a.b)("code",Object(n.a)({parentName:"pre"},{className:"language-yaml"}),"# Resources/Maps/tutorial_basic.yml\n\n# Rooms and passages are added here.\n\n# Default room shapes are added here.\n\ncorridors:\n  enable: true\n  offsets: [1]\n  corridorShapes:\n    -\n      setName: tutorial_corridors\n")),Object(a.b)("h2",{id:"summary"},"Summary"),Object(a.b)("p",null,"The map description is now ready to be used in a layout generator. You can find the full C# source code ",Object(a.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/OndrejNepozitek/ProceduralLevelGenerator/blob/master/Sandbox/Examples/CorridorsExample.cs"}),"here")," and the config files ",Object(a.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/OndrejNepozitek/ProceduralLevelGenerator/tree/master/Resources"}),"here"),"."),Object(a.b)("p",null,"Don't forget to use the appropriate layout generator if using the C# api."),Object(a.b)("h2",{id:"results"},"Results"),Object(a.b)(s.a,{cols:4,mdxType:"Gallery"},Object(a.b)(s.b,{src:"img/corridors/0.jpg",mdxType:"GalleryImage"}),Object(a.b)(s.b,{src:"img/corridors/1.jpg",mdxType:"GalleryImage"}),Object(a.b)(s.b,{src:"img/corridors/2.jpg",mdxType:"GalleryImage"}),Object(a.b)(s.b,{src:"img/corridors/3.jpg",mdxType:"GalleryImage"})))}p.isMDXComponent=!0},163:function(e,r,t){"use strict";t.d(r,"a",(function(){return d})),t.d(r,"b",(function(){return m}));var n=t(0),o=t.n(n);function a(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function i(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function s(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?i(Object(t),!0).forEach((function(r){a(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function c(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var l=o.a.createContext({}),u=function(e){var r=o.a.useContext(l),t=r;return e&&(t="function"==typeof e?e(r):s({},r,{},e)),t},d=function(e){var r=u(e.components);return o.a.createElement(l.Provider,{value:r},e.children)},p={inlineCode:"code",wrapper:function(e){var r=e.children;return o.a.createElement(o.a.Fragment,{},r)}},b=Object(n.forwardRef)((function(e,r){var t=e.components,n=e.mdxType,a=e.originalType,i=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),d=u(t),b=n,m=d["".concat(i,".").concat(b)]||d[b]||p[b]||a;return t?o.a.createElement(m,s({ref:r},l,{components:t})):o.a.createElement(m,s({ref:r},l))}));function m(e,r){var t=arguments,n=r&&r.mdxType;if("string"==typeof e||n){var a=t.length,i=new Array(a);i[0]=b;var s={};for(var c in r)hasOwnProperty.call(r,c)&&(s[c]=r[c]);s.originalType=e,s.mdxType="string"==typeof e?e:n,i[1]=s;for(var l=2;l<a;l++)i[l]=t[l];return o.a.createElement.apply(null,i)}return o.a.createElement.apply(null,t)}b.displayName="MDXCreateElement"},164:function(e,r,t){"use strict";t.d(r,"a",(function(){return o}));t(169);var n=t(165);function o(e){var r=(Object(n.a)().siteConfig||{}).baseUrl,t=void 0===r?"/":r;if(!e)return e;return/^(https?:|\/\/)/.test(e)?e:e.startsWith("/")?t+e.slice(1):t+e}},165:function(e,r,t){"use strict";var n=t(0),o=t(48);r.a=function(){return Object(n.useContext)(o.a)}},167:function(e,r,t){var n=t(66),o=t(23);e.exports=function(e,r,t){if(n(r))throw TypeError("String#"+t+" doesn't accept regex!");return String(o(e))}},168:function(e,r,t){var n=t(2)("match");e.exports=function(e){var r=/./;try{"/./"[e](r)}catch(t){try{return r[n]=!1,!"/./"[e](r)}catch(o){}}return!0}},169:function(e,r,t){"use strict";var n=t(17),o=t(34),a=t(167),i="".startsWith;n(n.P+n.F*t(168)("startsWith"),"String",{startsWith:function(e){var r=a(this,e,"startsWith"),t=o(Math.min(arguments.length>1?arguments[1]:void 0,r.length)),n=String(e);return i?i.call(r,n,t):r.slice(t,t+n.length)===n}})},170:function(e,r,t){"use strict";t.d(r,"a",(function(){return s})),t.d(r,"b",(function(){return c}));var n=t(0),o=t.n(n),a=t(164);const i=e=>o.a.createElement("div",{style:{display:"inline-block",margin:2,overflow:"hidden",position:"relative",width:`calc(${100/e.cols}% - 4px)`}},e.children),s=e=>o.a.createElement("div",{style:{fontSize:"0px",margin:"20px 0"}},o.a.Children.map(e.children,r=>o.a.cloneElement(r,{cols:e.cols||4}))),c=e=>o.a.createElement("a",{href:Object(a.a)(e.src),target:"_blank"},o.a.createElement(i,{cols:e.cols},o.a.createElement("img",{src:Object(a.a)(e.src),alt:"result"})))}}]);